{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_extract_field_descriptor.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_get.js","node_modules/@swc/helpers/lib/_check_private_redeclaration.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_set.js","src/js/myLibrary/manageFilters.js","src/js/myLibrary/helpers.js","src/js/myLibrary/localDB.js","node_modules/@swc/helpers/lib/_class_private_field_get.js","node_modules/@swc/helpers/lib/_class_private_field_init.js","node_modules/@swc/helpers/lib/_class_private_field_set.js","node_modules/@swc/helpers/lib/_class_private_method_get.js","node_modules/@swc/helpers/lib/_class_private_method_init.js","src/js/myLibrary/genres.js","src/js/myLibrary/refs.js","src/js/myLibrary/manageGallery.js","src/js/myLibrary/manageMovie.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classExtractFieldDescriptor;\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorGet;\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n    if (descriptor.get) {\n        return descriptor.get.call(receiver);\n    }\n    return descriptor.value;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorSet;\nfunction _classApplyDescriptorSet(receiver, descriptor, value) {\n    if (descriptor.set) {\n        descriptor.set.call(receiver, value);\n    } else {\n        if (!descriptor.writable) {\n            // This should only throw in strict mode, but class bodies are\n            // always strict and private fields can only be used inside\n            // class bodies.\n            throw new TypeError(\"attempted to set read only private field\");\n        }\n        descriptor.value = value;\n    }\n}\n","import { renderMovies, writeTestDataToDB } from './helpers';\nimport { initGenres } from './genres';\nimport { refs } from './refs';\n\nrefs.filter.addEventListener('click', onFilterClick);\n\n// Initial render\ninit();\nasync function init() {\n  await initGenres();\n  writeTestDataToDB();\n  renderMovies();\n}\n\n// ====================\n\nfunction onFilterClick(event) {\n  const target = event.target;\n  if (!target.closest('input')) {\n    return;\n  }\n  renderMovies();\n}\n// ====================\n","import { markupMovieCards } from '../markupMovieCards';\nimport { db } from './localDB';\nimport { genres } from './genres';\nimport { refs } from './refs';\n\n// ====================\n\nexport function renderMovies() {\n  const formData = new FormData(refs.filter);\n  const filterValue = formData.get('filter');\n\n  const filteredMovies = db.getMovies({ [filterValue]: true });\n  const moviesDetails = filteredMovies.map(item => item.movieDetails);\n  const markup = markupMovieCards(moviesDetails, genres).join('');\n  refs.gallery.innerHTML = markup;\n}\n\n// ====================\n\nexport function renderModalCard(id) {\n  db.cachedMovie = db.getMovie({ id }).movieDetails;\n  const markup = getModalCardMarkup(db.cachedMovie.movieDetails, genres);\n  refs.modal.innerHTML = markup;\n\n  updateBtnStatus();\n  refs.modal.classList.add('active');\n}\n\n// ====================\n\nexport function updateBtnStatus() {\n  const btnQueuedEl = document.querySelector(\n    '.js-movie-buttons input[value=\"isQueued\"]'\n  );\n\n  const btnWatchedEl = document.querySelector(\n    '.js-movie-buttons input[value=\"isWatched\"]'\n  );\n\n  const btnRemoveEl = document.querySelector('.js-remove-button');\n  btnQueuedEl.checked = db.cachedMovie.isQueued;\n  btnWatchedEl.checked = db.cachedMovie.isWatched;\n\n  if (db.cachedMovie.isWatched || db.cachedMovie.isQueued) {\n    btnRemoveEl.style.display = 'inline-block';\n  } else {\n    btnRemoveEl.style.display = 'none';\n  }\n}\n\nexport function cacheMovie(movieDetails) {\n  db.cashedMovie = movieDetails;\n}\n// ************** TEMPORARY FUNCTIONS FOR TESTING *********************\nexport function getModalCardMarkup({\n  title,\n  vote_count,\n  vote_average,\n  popularity,\n  original_title,\n  overview,\n}) {\n  const markup = `<div class=\"modal_description\">\n    <h1 class=\"movie_title\">${title}</h1>\n    <ul>\n        <li class=\"movie_description\">Vote / Votes<span class=\"movie_vote\">${vote_count}</span>\n        <span class=\"movie_description\">${vote_average}</span></li>\n        <li class=\"movie_description\">Popularity<span class=\"movie_value\">${popularity}</span></li>\n        <li class=\"movie_description\">Original Title<span class=\"movie_value\">${original_title}</span></li>\n        <li class=\"movie_description\">Genre<span class=\"movie_value\">${genres.name}</span></li>\n    </ul>\n    <h2></h2>\n    <p class=\"about-text\">${overview}</p>\n\n    <form class=\"js-movie-buttons movie-buttons\">\n        <label class=\"movie-buttons__label\">\n          <input class=\"movie-buttons__input\" type=\"radio\" name=\"status\" value=\"isWatched\" />\n          <span class=\"movie-buttons__text button\">Watched</span>\n        </label>\n\n        <label class=\"movie-buttons__label\">\n          <input class=\"movie-buttons__input\" type=\"radio\" name=\"status\" value=\"isQueued\" />\n          <span class=\"movie-buttons__text button\"\n            >Queued</span\n          >\n        </label>\n        <button type=\"button\" class=\"js-remove-button button \">Remove</button>\n        </form>\n  </div>`;\n\n  return markup;\n}\n// *********************\n// js-modal-form= js-movie-buttons\n// ===========\nexport function writeTestDataToDB() {\n  const template = {\n    adult: false,\n    backdrop_path: '/bQXAqRx2Fgc46uCVWgoPz5L5Dtr.jpg',\n    id: 1,\n    title: 'Black Adam',\n    original_language: 'en',\n    original_title: 'Black Adam',\n    overview:\n      'Nearly 5,000 years after he was bestowed with the almighty powers of the Egyptian gods—and imprisoned just as quickly—Black Adam is freed from his earthly tomb, ready to unleash his unique form of justice on the modern world.',\n    poster_path: '/3zXceNTtyj5FLjwQXuPvLYK5YYL.jpg',\n    media_type: 'movie',\n    genre_ids: [28, 14, 878],\n    popularity: 4085.77,\n    release_date: '2022-10-19',\n    video: false,\n    vote_average: 6.937,\n    vote_count: 803,\n  };\n\n  for (let i = 0; i < 6; i++) {\n    const movieDetails = {\n      ...template,\n      id: i + 1,\n      title: `${template.title} - ${i + 1}`,\n    };\n    db.addMovie({\n      id: movieDetails.id,\n      isQueued: true,\n      isWatched: false,\n      movieDetails,\n    });\n  }\n}\n","export let db;\n\nclass LocalDB {\n  KEY = 'movies';\n  #cachedMovie;\n\n  // =====================\n\n  get cachedMovie() {\n    return this.#cachedMovie;\n  }\n\n  // =====================\n\n  set cachedMovie(movieDetails) {\n    const foundMovie = this.getMovie({ id: movieDetails.id });\n\n    this.#cachedMovie = {\n      id: String(movieDetails.id),\n      isWatched: false,\n      isQueued: false,\n      movieDetails,\n    };\n    if (foundMovie) {\n      this.#cachedMovie.isQueued = foundMovie.isQueued;\n      this.#cachedMovie.isWatched = foundMovie.isWatched;\n    }\n  }\n\n  addMovie({ id, isQueued, isWatched, movieDetails }) {\n    // id is required\n    if (!id) {\n      return null;\n    }\n\n    // one of flags isWatched or isQueued is required\n    if (isWatched === undefined && isQueued === undefined) {\n      return null;\n    }\n\n    // flag isQueued is foreground\n    if (isQueued !== undefined) {\n      isWatched = !isQueued;\n    } else {\n      isQueued = !isWatched;\n    }\n\n    const movie = {\n      id: String(id),\n      isWatched,\n      isQueued,\n      movieDetails,\n    };\n\n    let moviesList = this.#getLibData();\n\n    if (!moviesList) {\n      moviesList = [];\n    }\n\n    const foundMovie = moviesList.find(\n      movie => String(movie.id) === String(id)\n    );\n    if (!foundMovie) {\n      // Movie not found\n      if (!movieDetails) {\n        return null;\n      }\n      moviesList.push(movie);\n    } else {\n      // Movie found\n      foundMovie.isQueued = isQueued;\n      foundMovie.isWatched = isWatched;\n      if (movieDetails) {\n        foundMovie.movieDetails = movieDetails;\n      }\n    }\n\n    if (!this.#saveLibData(moviesList)) {\n      return null;\n    }\n    return foundMovie;\n  }\n\n  // =====================\n\n  removeMovie({ id }) {\n    const moviesList = this.#getLibData();\n\n    if (!moviesList) {\n      return null;\n    }\n\n    const foundIndex = moviesList.findIndex(\n      movie => String(movie.id) === String(id)\n    );\n    const removedMovie = moviesList.splice(foundIndex, 1);\n    if (!this.#saveLibData(moviesList)) {\n      return null;\n    }\n    return removedMovie;\n  }\n\n  // =====================\n\n  getMovie({ id }) {\n    const moviesList = this.#getLibData();\n\n    if (!moviesList) {\n      return null;\n    }\n\n    const found = moviesList.find(movie => String(movie.id) === String(id));\n\n    return found ?? null;\n  }\n\n  // =====================\n\n  getMovies({ isWatched, isQueued }) {\n    let result = [];\n\n    const moviesList = this.#getLibData();\n    if (!moviesList) {\n      return result;\n    }\n\n    if (isWatched === undefined && isQueued === undefined) {\n      return moviesList;\n    }\n\n    if (isWatched) {\n      const found = moviesList.filter(movie => movie.isWatched);\n      if (found) {\n        result = [...result, ...found];\n      }\n    }\n\n    if (isQueued) {\n      const found = moviesList.filter(movie => movie.isQueued);\n      if (found) {\n        result = [...result, ...found];\n      }\n    }\n\n    // TODO: delete double id\n\n    return result;\n  }\n\n  // =====================\n\n  #getLibData() {\n    let storage = localStorage.getItem(this.KEY);\n    if (!storage) {\n      return null;\n    }\n    try {\n      storage = JSON.parse(storage);\n      if (!Array.isArray(storage)) {\n        return null;\n      }\n      return storage;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  // =====================\n\n  #saveLibData(data) {\n    try {\n      localStorage.setItem(this.KEY, JSON.stringify(data));\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n}\n\ndb = new LocalDB();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldGet;\nvar _classExtractFieldDescriptor = _interopRequireDefault(require(\"./_class_extract_field_descriptor\"));\nvar _classApplyDescriptorGet = _interopRequireDefault(require(\"./_class_apply_descriptor_get\"));\nfunction _classPrivateFieldGet(receiver, privateMap) {\n    var descriptor = (0, _classExtractFieldDescriptor).default(receiver, privateMap, \"get\");\n    return (0, _classApplyDescriptorGet).default(receiver, descriptor);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateFieldInit(obj, privateMap, value) {\n    (0, _checkPrivateRedeclaration).default(obj, privateMap);\n    privateMap.set(obj, value);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldSet;\nvar _classExtractFieldDescriptor = _interopRequireDefault(require(\"./_class_extract_field_descriptor\"));\nvar _classApplyDescriptorSet = _interopRequireDefault(require(\"./_class_apply_descriptor_set\"));\nfunction _classPrivateFieldSet(receiver, privateMap, value) {\n    var descriptor = (0, _classExtractFieldDescriptor).default(receiver, privateMap, \"set\");\n    (0, _classApplyDescriptorSet).default(receiver, descriptor, value);\n    return value;\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodGet;\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return fn;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateMethodInit(obj, privateSet) {\n    (0, _checkPrivateRedeclaration).default(obj, privateSet);\n    privateSet.add(obj);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","import ServerRequest from '../serverRequest';\n\nexport let genres = [];\n\nexport async function initGenres() {\n  const requestAPI = new ServerRequest();\n  // Download genres\n  try {\n    genres = await requestAPI.getGenres();\n  } catch (error) {}\n}\n","export const refs = {\n  filter: document.querySelector('.js-filter-my-library'),\n  gallery: document.querySelector('.gallery_main-page'),\n  modal: document.querySelector('.js-movie-modal'),\n};\n","import { renderModalCard } from './helpers';\nimport { refs } from './refs';\n\nrefs.gallery.addEventListener('click', onGalleryClick);\n\nfunction onGalleryClick(event) {\n  const target = event.target;\n  const movieCardEl = target.closest('.gallery__item');\n  if (!movieCardEl) {\n    return;\n  }\n  const id = movieCardEl.dataset.movieid;\n  renderModalCard(id);\n}\n\n// ====================\n","import { db } from './localDB';\nimport { renderMovies, updateBtnStatus } from './helpers';\nimport { refs } from './refs';\n\nrefs.modal.addEventListener('click', onModalClick);\n\n// ====================\n\nfunction onModalClick(event) {\n  const target = event.target;\n  const movieCardEl = target.closest('.modal_description');\n  if (!movieCardEl) {\n    // clicked outside card\n    refs.modal.classList.remove('active');\n  }\n  if (target.closest('.js-movie-buttons') && target.closest('input')) {\n    // add to queued or watched\n    const formEl = target.closest('.js-movie-buttons');\n    const formData = new FormData(formEl);\n    const status = formData.get('status');\n    if (status === 'isWatched') {\n      db.cachedMovie.isQueued = false;\n      db.cachedMovie.isWatched = true;\n    } else if (status === 'isQueued') {\n      db.cachedMovie.isQueued = true;\n      db.cachedMovie.isWatched = false;\n    }\n\n    db.addMovie(db.cachedMovie);\n    renderMovies();\n  }\n  if (target.classList.contains('js-remove-button')) {\n    db.removeMovie({ id: db.cachedMovie.id });\n    db.cachedMovie.isQueued = false;\n    db.cachedMovie.isWatched = false;\n    // target.style.display = 'none';\n    renderMovies();\n  }\n  updateBtnStatus();\n}\n\n// ====================\n"],"names":["Object","defineProperty","module","exports","value","default","receiver","privateMap","action","has","TypeError","get","descriptor","call","obj","privateCollection","set","writable","$bpxeT","parcelRequire","$hKHmD","$8MBJY","$37616d1d2d9e1de3$exports","$37616d1d2d9e1de3$var$_classExtractFieldDescriptor","$37616d1d2d9e1de3$var$_classApplyDescriptorGet","$37616d1d2d9e1de3$var$_interopRequireDefault","__esModule","$665bb80dc57e205a$exports","$665bb80dc57e205a$var$_checkPrivateRedeclaration","$a11a0d8e92c06afc$exports","$a11a0d8e92c06afc$var$_classExtractFieldDescriptor","$a11a0d8e92c06afc$var$_classApplyDescriptorSet","$a11a0d8e92c06afc$var$_interopRequireDefault","$82ce8d6f4ce6ea51$exports","privateSet","fn","$b5362597a15e80da$exports","$b5362597a15e80da$var$_checkPrivateRedeclaration","add","$b5362597a15e80da$var$_interopRequireDefault","$3d62acb2a19f0d45$export$f932f06c7eb6abeb","$3d62acb2a19f0d45$var$_cachedMovie","WeakMap","$3d62acb2a19f0d45$var$_getLibData","WeakSet","$3d62acb2a19f0d45$var$_saveLibData","$3d62acb2a19f0d45$var$getLibData","storage","localStorage","getItem","this","KEY","JSON","parse","Array","isArray","error","$3d62acb2a19f0d45$var$saveLibData","data","setItem","stringify","LocalDB","$parcel$interopDefault","key","movieDetails","foundMovie","getMovie","id","String","isWatched","isQueued","param","undefined","movie1","moviesList","find","movie","push","foundIndex","findIndex","removedMovie","splice","found","result","filter","$8nrFW","concat","found1","$472978416e5b6c17$export$be3a0ca764f9df2b","$472978416e5b6c17$export$4411eb5e94b063dd","$472978416e5b6c17$var$_initGenres","apply","arguments","$2TvXO","mark","_callee","requestAPI","$6XhEX","getGenres","_ctx","sent","$2da74ca7b723b3f6$export$21666b427502ea6d","document","querySelector","gallery","modal","$d6e4582a82e1df9c$export$1a30573fde3dfc62","filterValue","FormData","moviesDetails","getMovies","map","item","markup","$chgrN","markupMovieCards","join","innerHTML","$d6e4582a82e1df9c$export$a3e6c44bf8af687b","cachedMovie","title","vote_count","vote_average","popularity","original_title","overview","name","$d6e4582a82e1df9c$export$864542d2aa9e4761","classList","btnQueuedEl","btnWatchedEl","btnRemoveEl","checked","style","display","$d6e4582a82e1df9c$export$ac7e8a376ad22a17","template","adult","backdrop_path","original_language","poster_path","media_type","genre_ids","release_date","video","i","$dDDEV","addMovie","$27e79e578f2ea179$var$_init","addEventListener","event","target","closest","$27e79e578f2ea179$var$init","movieCardEl","dataset","movieid","remove","formEl","status","contains","removeMovie"],"version":3,"file":"myLibrary.07a6b02e.js.map"}