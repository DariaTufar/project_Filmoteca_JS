{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_check_private_redeclaration.js","src/js/myFilters.js","node_modules/@swc/helpers/lib/_class_private_method_get.js","node_modules/@swc/helpers/lib/_class_private_method_init.js","src/js/MyLibraryDB.js","src/js/modalTeam.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","import { markupMovieCards } from './markupMovieCards';\nimport ServerRequest from './serverRequest';\nimport { MyLibraryDB } from './MyLibraryDB';\nimport { refs } from './refs';\n\n// Variables\nconst requestAPI = new ServerRequest();\nconst myLibDB = new MyLibraryDB();\nlet genres = [];\nlet currentMovie;\n\nconst filterEl = document.querySelector('.js-filter-my-library');\nconst galleryEl = refs.galleryList;\nconst modalEl = document.querySelector('.js-movie-modal');\n\ninit();\n\nasync function init() {\n  // Bind events\n  filterEl.addEventListener('click', onFilterClick);\n  galleryEl.addEventListener('click', onGalleryClick);\n  modalEl.addEventListener('click', onModalClick);\n\n  // Download genres\n  try {\n    genres = await requestAPI.getGenres();\n  } catch (error) {}\n\n  // Initial render\n  writeTestDataToDB();\n  renderMovies();\n}\n\n// ====================\n\nfunction onFilterClick(event) {\n  const target = event.target;\n  if (!target.closest('input')) {\n    return;\n  }\n  renderMovies();\n}\n// ====================\n\nfunction onGalleryClick(event) {\n  const target = event.target;\n  const movieCardEl = target.closest('.gallery__item');\n  if (!movieCardEl) {\n    return;\n  }\n  const id = movieCardEl.dataset.movieid;\n  renderModalCard(id);\n}\n\n// ====================\nfunction onModalClick(event) {\n  const target = event.target;\n\n  const movieCardEl = target.closest('.modal_description');\n  if (!movieCardEl) {\n    // clicked outside card\n    modalEl.classList.remove('active');\n  }\n  if (target.nodeName === 'BUTTON') {\n    // add to queued or watched\n\n    if (currentMovie.isWatched) {\n      currentMovie.isQueued = true;\n      currentMovie.isWatched = false;\n    } else {\n      currentMovie.isQueued = false;\n      currentMovie.isWatched = true;\n    }\n    myLibDB.addMovie(currentMovie);\n    renderMovies();\n  }\n}\n\n// ====================\nfunction renderModalCard(id) {\n  currentMovie = myLibDB.getMovie({ id });\n  const markup = getModalCardMarkup(currentMovie.movieDetails, genres);\n  modalEl.innerHTML = markup;\n  modalEl.classList.add('active');\n}\n// ====================\n\nfunction renderMovies() {\n  const formData = new FormData(filterEl);\n  const filterValue = formData.get('filter');\n\n  const filteredMovies = myLibDB.getMovies({ [filterValue]: true });\n  const moviesDetails = filteredMovies.map(item => item.movieDetails);\n  const markup = markupMovieCards(moviesDetails, genres).join('');\n  galleryEl.innerHTML = markup;\n}\n\n// ************** TEMPORARY FUNCTIONS FOR TESTING *********************\nfunction getModalCardMarkup(\n  { title, vote_count, vote_average, popularity, original_title, overview },\n  genres\n) {\n  const markup = `<div class=\"modal_description\">\n    <h1 class=\"movie_title\">${title}</h1>\n    <ul>\n        <li class=\"movie_description\">Vote / Votes<span class=\"movie_vote\">${vote_count}</span>\n        <span class=\"movie_description\">${vote_average}</span></li>\n        <li class=\"movie_description\">Popularity<span class=\"movie_value\">${popularity}</span></li>\n        <li class=\"movie_description\">Original Title<span class=\"movie_value\">${original_title}</span></li>\n        <li class=\"movie_description\">Genre<span class=\"movie_value\">${Object(\n          genres.name\n        )}</span></li>\n    </ul>\n    <h2></h2>\n    <p class=\"about-text\">${overview}</p>\n\n    <button>ADD TO WATCHED</button>\n    <button>ADD TO QUEUE</button>\n  </div>`;\n\n  return markup;\n}\n\n// ===========\nfunction writeTestDataToDB() {\n  const template = {\n    adult: false,\n    backdrop_path: '/bQXAqRx2Fgc46uCVWgoPz5L5Dtr.jpg',\n    id: 1,\n    title: 'Black Adam',\n    original_language: 'en',\n    original_title: 'Black Adam',\n    overview:\n      'Nearly 5,000 years after he was bestowed with the almighty powers of the Egyptian gods—and imprisoned just as quickly—Black Adam is freed from his earthly tomb, ready to unleash his unique form of justice on the modern world.',\n    poster_path: '/3zXceNTtyj5FLjwQXuPvLYK5YYL.jpg',\n    media_type: 'movie',\n    genre_ids: [28, 14, 878],\n    popularity: 4085.77,\n    release_date: '2022-10-19',\n    video: false,\n    vote_average: 6.937,\n    vote_count: 803,\n  };\n\n  for (let i = 0; i < 6; i++) {\n    const movieDetails = {\n      ...template,\n      id: i + 1,\n      title: `${template.title} - ${i + 1}`,\n    };\n    myLibDB.addMovie({\n      id: movieDetails.id,\n      isQueued: true,\n      isWatched: false,\n      movieDetails,\n    });\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodGet;\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return fn;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateMethodInit(obj, privateSet) {\n    (0, _checkPrivateRedeclaration).default(obj, privateSet);\n    privateSet.add(obj);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","export class MyLibraryDB {\n  KEY = 'movies';\n\n  // =====================\n\n  addMovie({ id, isQueued, isWatched, movieDetails }) {\n    // id is required\n    if (!id) {\n      return null;\n    }\n\n    // one of flags isWatched or isQueued is required\n    if (isWatched === undefined && isQueued === undefined) {\n      return null;\n    }\n\n    // flag isQueued is foreground\n    if (isQueued !== undefined) {\n      isWatched = !isQueued;\n    } else {\n      isQueued = !isWatched;\n    }\n\n    const movie = {\n      id: String(id),\n      isWatched,\n      isQueued,\n      movieDetails,\n    };\n\n    let moviesList = this.#getLibData();\n\n    if (!moviesList) {\n      moviesList = [];\n    }\n\n    const foundMovie = moviesList.find(\n      movie => String(movie.id) === String(id)\n    );\n    if (!foundMovie) {\n      // Movie not found\n      if (!movieDetails) {\n        return null;\n      }\n      moviesList.push(movie);\n    } else {\n      // Movie found\n      foundMovie.isQueued = isQueued;\n      foundMovie.isWatched = isWatched;\n      if (movieDetails) {\n        foundMovie.movieDetails = movieDetails;\n      }\n    }\n\n    if (!this.#saveLibData(moviesList)) {\n      return null;\n    }\n    return foundMovie;\n  }\n\n  // =====================\n\n  removeMovie({ id }) {\n    const moviesList = this.#getLibData();\n\n    if (!moviesList) {\n      return null;\n    }\n\n    const foundIndex = moviesList.findIndex(\n      movie => String(movie.id) === String(id)\n    );\n    const removedMovie = moviesList.splice(foundIndex, 1);\n    if (!this.#saveLibData(moviesList)) {\n      return null;\n    }\n    return removedMovie;\n  }\n\n  // =====================\n\n  getMovie({ id }) {\n    const moviesList = this.#getLibData();\n\n    if (!moviesList) {\n      return null;\n    }\n\n    const found = moviesList.find(movie => String(movie.id) === String(id));\n\n    return found ?? null;\n  }\n\n  // =====================\n\n  getMovies({ isWatched, isQueued }) {\n    let result = [];\n\n    const moviesList = this.#getLibData();\n    if (!moviesList) {\n      return result;\n    }\n\n    if (isWatched === undefined && isQueued === undefined) {\n      return moviesList;\n    }\n\n    if (isWatched) {\n      const found = moviesList.filter(movie => movie.isWatched);\n      if (found) {\n        result = [...result, ...found];\n      }\n    }\n\n    if (isQueued) {\n      const found = moviesList.filter(movie => movie.isQueued);\n      if (found) {\n        result = [...result, ...found];\n      }\n    }\n\n    // TODO: delete double id\n\n    return result;\n  }\n\n  // =====================\n\n  #getLibData() {\n    let storage = localStorage.getItem(this.KEY);\n    if (!storage) {\n      return null;\n    }\n    try {\n      storage = JSON.parse(storage);\n      if (!Array.isArray(storage)) {\n        return null;\n      }\n      return storage;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  // =====================\n\n  #saveLibData(data) {\n    try {\n      localStorage.setItem(this.KEY, JSON.stringify(data));\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n}\n","const refs = {\n  openModalBtn: document.querySelector('#open-team-modal'),\n  modal: document.querySelector('[data-modals]'),\n  body: document.querySelector('body'),\n};\nfunction toggleModal(event) {\n  event.preventDefault();\n  refs.modal.classList.remove('is-hiddens');\n  document.body.classList.add('modal-open');\n  function onKeyPress(event) {\n    if (event.code === 'Escape') {\n      refs.modal.classList.add('is-hiddens');\n      document.body.classList.remove('modal-open');\n      refs.body.removeEventListener('keyup', onKeyPress);\n    }\n  }\n  function onGalleryClick(event) {\n    if (event.target.closest('.modals')) return;\n    refs.modal.classList.add('is-hiddens');\n    document.body.classList.remove('modal-open');\n    refs.modal.removeEventListener('click', onGalleryClick);\n  }\n  refs.body.addEventListener('keyup', onKeyPress);\n  refs.modal.addEventListener('click', onGalleryClick);\n}\nrefs.openModalBtn.addEventListener('click', toggleModal);\n"],"names":["Object","defineProperty","module","exports","value","default","obj","privateCollection","has","TypeError","$2dqxC","parcelRequire","$c9f733bc98e3bbfd$exports","receiver","privateSet","fn","$60afe4cd2804d2bb$exports","$60afe4cd2804d2bb$var$_checkPrivateRedeclaration","add","__esModule","$6b0b12ea6d2b298a$var$_getLibData","WeakSet","$6b0b12ea6d2b298a$var$_saveLibData","$6b0b12ea6d2b298a$var$getLibData","storage","localStorage","getItem","this","KEY","JSON","parse","Array","isArray","error","$6b0b12ea6d2b298a$var$saveLibData","data","setItem","stringify","$33c6b7d7fc6effdd$var$requestAPI","$85EYF","$33c6b7d7fc6effdd$var$myLibDB","addMovie","id","isQueued","isWatched","movieDetails","undefined","movie1","String","moviesList","$parcel$interopDefault","call","foundMovie","find","movie","push","removeMovie","foundIndex","findIndex","removedMovie","splice","getMovie","found","getMovies","result","filter","$iJYdK","$33c6b7d7fc6effdd$var$currentMovie","$33c6b7d7fc6effdd$var$genres","$33c6b7d7fc6effdd$var$filterEl","document","querySelector","$33c6b7d7fc6effdd$var$galleryEl","$krGWQ","refs","galleryList","$33c6b7d7fc6effdd$var$modalEl","$33c6b7d7fc6effdd$var$onFilterClick","event","target","closest","$33c6b7d7fc6effdd$var$renderMovies","$33c6b7d7fc6effdd$var$onGalleryClick","movieCardEl","markup","title","vote_count","vote_average","popularity","original_title","overview","genres1","name","$33c6b7d7fc6effdd$var$getModalCardMarkup","innerHTML","classList","$33c6b7d7fc6effdd$var$renderModalCard","dataset","movieid","$33c6b7d7fc6effdd$var$onModalClick","remove","nodeName","filterValue","FormData","get","moviesDetails","map","item","markupMovieCards","join","async","addEventListener","getGenres","template","adult","backdrop_path","original_language","poster_path","media_type","genre_ids","release_date","video","i","$33c6b7d7fc6effdd$var$writeTestDataToDB","$33c6b7d7fc6effdd$var$init","$7ecca67214b608f8$var$refs","openModalBtn","modal","body","event1","preventDefault","onKeyPress","code","removeEventListener","onGalleryClick"],"version":3,"file":"myLibrary.38d63a9e.js.map"}