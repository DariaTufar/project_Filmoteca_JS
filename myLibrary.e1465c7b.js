function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return i[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequired7c6=o),o.register("fExtF",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}})),o.register("iaRLo",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),o.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),o.register("3LGG3",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}}));var a=o("2dqxC"),l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t){var i=r.default(e,t,"get");return s.default(e,i)};var r=d(o("fExtF")),s=d(o("iaRLo"));function d(e){return e&&e.__esModule?e:{default:e}}var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e,t,i){f.default(e,t),t.set(e,i)};var c,f=(c=o("7K24o"))&&c.__esModule?c:{default:c};var v={};Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(e,t,i){var n=m.default(e,t,"set");return p.default(e,n,i),i};var m=h(o("fExtF")),p=h(o("3LGG3"));function h(e){return e&&e.__esModule?e:{default:e}}var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i};var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.default=function(e,t){y.default(e,t),t.add(e)};var y=function(e){return e&&e.__esModule?e:{default:e}}(o("7K24o"));var M=o("iJYdK");let b;var w=new WeakMap,j=new WeakSet,x=new WeakSet;function W(){let e=localStorage.getItem(this.KEY);if(!e)return null;try{return e=JSON.parse(e),Array.isArray(e)?e:null}catch(e){return null}}function S(e){try{return localStorage.setItem(this.KEY,JSON.stringify(e)),!0}catch(e){return!1}}b=new class{get cachedMovie(){return e(l)(this,w)}set cachedMovie(t){const i=this.getMovie({id:t.id});e(v)(this,w,{id:String(t.id),isWatched:!1,isQueued:!1,movieDetails:t}),i&&(e(l)(this,w).isQueued=i.isQueued,e(l)(this,w).isWatched=i.isWatched)}addMovie({id:t,isQueued:i,isWatched:n,movieDetails:o}){if(!t)return null;if(void 0===n&&void 0===i)return null;void 0!==i?n=!i:i=!n;const a={id:String(t),isWatched:n,isQueued:i,movieDetails:o};let l=e(_)(this,j,W).call(this);l||(l=[]);const r=l.find((e=>String(e.id)===String(t)));if(r)r.isQueued=i,r.isWatched=n,o&&(r.movieDetails=o);else{if(!o)return null;l.push(a)}return e(_)(this,x,S).call(this,l)?r:null}removeMovie({id:t}){const i=e(_)(this,j,W).call(this);if(!i)return null;const n=i.findIndex((e=>String(e.id)===String(t))),o=i.splice(n,1);return e(_)(this,x,S).call(this,i)?o:null}getMovie({id:t}){const i=e(_)(this,j,W).call(this);if(!i)return null;const n=i.find((e=>String(e.id)===String(t)));return null!=n?n:null}getMovies({isWatched:t,isQueued:i}){let n=[];const o=e(_)(this,j,W).call(this);if(!o)return n;if(void 0===t&&void 0===i)return o;if(t){const e=o.filter((e=>e.isWatched));e&&(n=[...n,...e])}if(i){const e=o.filter((e=>e.isQueued));e&&(n=[...n,...e])}return n}constructor(){e(g)(this,j),e(g)(this,x),e(M)(this,"KEY","movies"),e(u)(this,w,{writable:!0,value:void 0})}};var Q=o("85EYF");let E=[];async function L(){const e=new(0,Q.default);try{E=await e.getGenres()}catch(e){}}const O={filter:document.querySelector(".js-filter-my-library"),gallery:document.querySelector(".gallery_main-page"),modal:document.querySelector(".js-movie-modal")};function k(){const e=new FormData(O.filter).get("filter"),t=b.getMovies({[e]:!0}).map((e=>e.movieDetails)),i=(0,a.markupMovieCards)(t,E).join("");O.gallery.innerHTML=i}function D(e){b.cachedMovie=b.getMovie({id:e}).movieDetails;const t=function({title:e,vote_count:t,vote_average:i,popularity:n,original_title:o,overview:a}){return`<div class="modal_description">\n    <h1 class="movie_title">${e}</h1>\n    <ul>\n        <li class="movie_description">Vote / Votes<span class="movie_vote">${t}</span>\n        <span class="movie_description">${i}</span></li>\n        <li class="movie_description">Popularity<span class="movie_value">${n}</span></li>\n        <li class="movie_description">Original Title<span class="movie_value">${o}</span></li>\n        <li class="movie_description">Genre<span class="movie_value">${E.name}</span></li>\n    </ul>\n    <h2></h2>\n    <p class="about-text">${a}</p>\n\n    <form class="js-modal-form modal-form">\n        <label class="modal-form__label">\n          <input class="modal-form__input" type="radio" name="status" value="isWatched" />\n          <span class="modal-form__text button">Watched</span>\n        </label>\n\n        <label class="modal-form__label">\n          <input class="modal-form__input" type="radio" name="status" value="isQueued" />\n          <span class="modal-form__text button"\n            >Queued</span\n          >\n        </label>\n        <button type="button" class="js-remove-button button">Remove</button>\n        </form>\n  </div>`}(b.cachedMovie.movieDetails);O.modal.innerHTML=t,P(),O.modal.classList.add("active")}function P(){const e=document.querySelector('.modal-form__input[value="isQueued"]'),t=document.querySelector('.modal-form__input[value="isWatched"]');e.checked=b.cachedMovie.isQueued,t.checked=b.cachedMovie.isWatched}function q(){const e={adult:!1,backdrop_path:"/bQXAqRx2Fgc46uCVWgoPz5L5Dtr.jpg",id:1,title:"Black Adam",original_language:"en",original_title:"Black Adam",overview:"Nearly 5,000 years after he was bestowed with the almighty powers of the Egyptian gods—and imprisoned just as quickly—Black Adam is freed from his earthly tomb, ready to unleash his unique form of justice on the modern world.",poster_path:"/3zXceNTtyj5FLjwQXuPvLYK5YYL.jpg",media_type:"movie",genre_ids:[28,14,878],popularity:4085.77,release_date:"2022-10-19",video:!1,vote_average:6.937,vote_count:803};for(let t=0;t<6;t++){const i={...e,id:t+1,title:`${e.title} - ${t+1}`};b.addMovie({id:i.id,isQueued:!0,isWatched:!1,movieDetails:i})}}O.filter.addEventListener("click",(function(e){if(!e.target.closest("input"))return;k()})),async function(){await L(),q(),k()}(),O.gallery.addEventListener("click",(function(e){const t=e.target.closest(".gallery__item");if(!t)return;D(t.dataset.movieid)})),O.modal.addEventListener("click",(function(e){const t=e.target;t.closest(".modal_description")||O.modal.classList.remove("active");if(t.closest(".modal-form__label")&&t.closest("input")){const e=t.closest(".js-modal-form"),i=new FormData(e).get("status");"isWatched"===i?(b.cachedMovie.isQueued=!1,b.cachedMovie.isWatched=!0):"isQueued"===i&&(b.cachedMovie.isQueued=!0,b.cachedMovie.isWatched=!1),b.addMovie(b.cachedMovie),k()}t.classList.contains("js-remove-button")&&(b.removeMovie({id:b.cachedMovie.id}),b.cachedMovie.isQueued=!1,b.cachedMovie.isWatched=!1,P(),k())})),o("aSWUZ"),o("bUb57");
//# sourceMappingURL=myLibrary.e1465c7b.js.map
